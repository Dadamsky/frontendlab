(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{6308:(e,t,a)=>{Promise.resolve().then(a.bind(a,9361))},1788:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,AuthProvider:()=>i});var s=a(5155),l=a(2115),r=a(399),d=a(7982);let o=(0,l.createContext)(),i=e=>{let{children:t}=e,[a,i]=(0,l.useState)(null),[n,c]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=(0,r.hg)(d.j,e=>{i(e),c(!1)});return()=>e()},[]);let m=async()=>{try{await (0,r.CI)(d.j),i(null)}catch(e){console.error("Logout error:",e.message)}};return(0,s.jsx)(o.Provider,{value:{user:a,loading:n,logout:m},children:t})},n=()=>{let e=(0,l.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},7982:(e,t,a)=>{"use strict";a.d(t,{db:()=>i,j:()=>o});var s=a(9904),l=a(399),r=a(7058);console.log("Firebase Config:",{apiKey:"AIzaSyCWexw9--3bLFJhfW0zn4qOhFWwu82ejnk",authDomain:"frontendlaboratoryapp-9b9d9.firebaseapp.com",projectId:"frontendlaboratoryapp-9b9d9",storageBucket:"frontendlaboratoryapp-9b9d9.appspot.com",messagingSenderId:"228356116980",appId:"1:228356116980:web:9492da82d2faf87596a9a1",measurementId:"G-KN5TR6VM5V"});let d=(0,s.Wp)({apiKey:"AIzaSyCWexw9--3bLFJhfW0zn4qOhFWwu82ejnk",authDomain:"frontendlaboratoryapp-9b9d9.firebaseapp.com",projectId:"frontendlaboratoryapp-9b9d9",storageBucket:"frontendlaboratoryapp-9b9d9.appspot.com",messagingSenderId:"228356116980",appId:"1:228356116980:web:9492da82d2faf87596a9a1",measurementId:"G-KN5TR6VM5V"}),o=(0,l.xI)(d),i=(0,r.aU)(d)},9361:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(5155),l=a(2115),r=a(1788),d=a(399),o=a(7982),i=a(7058),n=a(9606);function c(){let{user:e}=(0,r.A)(),[t,a]=(0,l.useState)(!0),[c,m]=(0,l.useState)(""),{register:u,setValue:p,handleSubmit:b,watch:h,formState:{errors:x}}=(0,n.mN)({defaultValues:{email:null==e?void 0:e.email,displayName:null==e?void 0:e.displayName,photoURL:(null==e?void 0:e.photoURL)||"",street:"",city:"",zipCode:""}});(0,l.useEffect)(()=>{let t=async()=>{try{let t=await (0,i.x7)((0,i.H9)(o.db,"users",null==e?void 0:e.uid));if(t.exists()){let e=t.data().address||{};p("street",e.street||""),p("city",e.city||""),p("zipCode",e.zipCode||"")}else console.log("No address data found for user.")}catch(e){console.error("Error fetching address:",e.message),m("Failed to fetch address data.")}finally{a(!1)}};(null==e?void 0:e.uid)&&t()},[e,p]);let y=async t=>{try{await (0,d.r7)(e,{displayName:t.displayName,photoURL:t.photoURL}),await (0,i.BN)((0,i.H9)(o.db,"users",null==e?void 0:e.uid),{address:{street:t.street,city:t.city,zipCode:t.zipCode}}),console.log("Profile and address updated successfully!"),alert("Profile and address updated successfully!")}catch(e){console.error("Error updating profile:",e.message),m("Failed to update profile. Please try again.")}};if(!e)return(0,s.jsx)("p",{children:"Loading user..."});let f=h("photoURL");return(0,s.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded shadow-md w-full max-w-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center",children:"Edit Profile"}),f&&(0,s.jsx)("div",{className:"mb-4 text-center",children:(0,s.jsx)("img",{src:f||"https://via.placeholder.com/150",alt:"Profile",className:"w-24 h-24 rounded-full mx-auto"})}),c&&(0,s.jsx)("div",{className:"alert alert-error mb-4",children:(0,s.jsx)("span",{children:c})}),(0,s.jsxs)("form",{onSubmit:b(y),children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700",children:"Display Name"}),(0,s.jsx)("input",{id:"displayName",type:"text",...u("displayName"),className:"w-full px-3 py-2 border rounded",disabled:t})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email (Read-Only)"}),(0,s.jsx)("input",{id:"email",type:"email",...u("email"),readOnly:!0,className:"w-full px-3 py-2 border rounded bg-gray-100"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"photoURL",className:"block text-sm font-medium text-gray-700",children:"Photo URL"}),(0,s.jsx)("input",{id:"photoURL",type:"text",...u("photoURL"),className:"w-full px-3 py-2 border rounded",disabled:t})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700",children:"Street"}),(0,s.jsx)("input",{id:"street",type:"text",...u("street"),className:"w-full px-3 py-2 border rounded",disabled:t})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),(0,s.jsx)("input",{id:"city",type:"text",...u("city"),className:"w-full px-3 py-2 border rounded",disabled:t})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700",children:"Zip Code"}),(0,s.jsx)("input",{id:"zipCode",type:"text",...u("zipCode"),className:"w-full px-3 py-2 border rounded",disabled:t})]}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600 ".concat(t?"opacity-50 cursor-not-allowed":""),disabled:t,children:"Save Changes"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[523,992,734,778,606,441,517,358],()=>t(6308)),_N_E=e.O()}]);