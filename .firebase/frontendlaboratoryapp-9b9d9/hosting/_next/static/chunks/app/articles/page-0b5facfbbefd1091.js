(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[292],{5943:(e,t,a)=>{Promise.resolve().then(a.bind(a,1673))},1673:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(5155),s=a(2115),l=a(1788),d=a(7982),i=a(7058),n=a(9606);function o(){let{user:e}=(0,l.A)(),[t,a]=(0,s.useState)([]),[o,c]=(0,s.useState)(!0),[u,m]=(0,s.useState)(""),[p,x]=(0,s.useState)(""),{register:h,handleSubmit:b,reset:f,formState:{errors:j}}=(0,n.mN)({defaultValues:{title:"",content:"",date:""}});(0,s.useEffect)(()=>{(async()=>{if(e)try{let t=(0,i.rJ)(d.db,"articles"),r=(0,i.P)(t,(0,i._M)("user","==",e.uid)),s=(await (0,i.GG)(r)).docs.map(e=>({id:e.id,...e.data()}));a(s)}catch(e){console.error("Error fetching articles:",e.message),m("Failed to fetch articles. Please try again later.")}finally{c(!1)}})()},[e]);let y=async t=>{try{if(!e)throw Error("User not authenticated");let r={...t,user:e.uid};await (0,i.gS)((0,i.rJ)(d.db,"articles"),r),console.log("Article added successfully!"),alert("Article added successfully!"),f(),a(e=>[...e,r])}catch(e){console.error("Error adding article:",e.message),x("Failed to add article. Please try again.")}};return e?(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Your Articles"}),(0,r.jsx)("div",{className:"mb-8",children:o?(0,r.jsx)("p",{children:"Loading articles..."}):0===t.length?(0,r.jsx)("p",{children:"No articles found for this user."}):(0,r.jsx)("ul",{className:"space-y-4",children:t.map(e=>(0,r.jsxs)("li",{className:"border p-4 rounded shadow",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:e.title}),(0,r.jsx)("p",{className:"text-gray-700",children:e.content}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Date: ",e.date||"N/A"]})]},e.id))})}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add New Article"}),(0,r.jsxs)("form",{onSubmit:b(y),className:"space-y-4",children:[p&&(0,r.jsx)("div",{className:"alert alert-error mb-4",children:(0,r.jsx)("span",{children:p})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,r.jsx)("input",{id:"title",type:"text",...h("title",{required:"Title is required"}),className:"w-full px-3 py-2 border rounded"}),j.title&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:j.title.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Content"}),(0,r.jsx)("textarea",{id:"content",...h("content",{required:"Content is required"}),className:"w-full px-3 py-2 border rounded",rows:"5"}),j.content&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:j.content.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700",children:"Date"}),(0,r.jsx)("input",{id:"date",type:"date",...h("date",{required:"Date is required"}),className:"w-full px-3 py-2 border rounded"}),j.date&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:j.date.message})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600",children:"Submit"})]})]}):(0,r.jsx)("p",{children:"Loading user..."})}},1788:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,AuthProvider:()=>n});var r=a(5155),s=a(2115),l=a(399),d=a(7982);let i=(0,s.createContext)(),n=e=>{let{children:t}=e,[a,n]=(0,s.useState)(null),[o,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,l.hg)(d.j,e=>{n(e),c(!1)});return()=>e()},[]);let u=async()=>{try{await (0,l.CI)(d.j),n(null)}catch(e){console.error("Logout error:",e.message)}};return(0,r.jsx)(i.Provider,{value:{user:a,loading:o,logout:u},children:t})},o=()=>{let e=(0,s.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},7982:(e,t,a)=>{"use strict";a.d(t,{db:()=>n,j:()=>i});var r=a(9904),s=a(399),l=a(7058);console.log("Firebase Config:",{apiKey:"AIzaSyCWexw9--3bLFJhfW0zn4qOhFWwu82ejnk",authDomain:"frontendlaboratoryapp-9b9d9.firebaseapp.com",projectId:"frontendlaboratoryapp-9b9d9",storageBucket:"frontendlaboratoryapp-9b9d9.appspot.com",messagingSenderId:"228356116980",appId:"1:228356116980:web:9492da82d2faf87596a9a1",measurementId:"G-KN5TR6VM5V"});let d=(0,r.Wp)({apiKey:"AIzaSyCWexw9--3bLFJhfW0zn4qOhFWwu82ejnk",authDomain:"frontendlaboratoryapp-9b9d9.firebaseapp.com",projectId:"frontendlaboratoryapp-9b9d9",storageBucket:"frontendlaboratoryapp-9b9d9.appspot.com",messagingSenderId:"228356116980",appId:"1:228356116980:web:9492da82d2faf87596a9a1",measurementId:"G-KN5TR6VM5V"}),i=(0,s.xI)(d),n=(0,l.aU)(d)}},e=>{var t=t=>e(e.s=t);e.O(0,[523,992,734,778,606,441,517,358],()=>t(5943)),_N_E=e.O()}]);